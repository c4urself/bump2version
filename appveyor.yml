build: false  # Not a C# project
environment:
  matrix:
    - TOXENV: py27
    - TOXENV: py27-configparser
    - TOXENV: py34
    - TOXENV: py35
    - TOXENV: py36
    - TOXENV: pypy 
    - TOXENV: pypy3


install:
  # on Windows, Mercurial is available only for Python 2.7
  - ps: (new-object net.webclient).DownloadFile('https://bootstrap.pypa.io/get-pip.py', 'C:/get-pip.py')
  - C:\Python27\python.exe C:\get-pip.py"
  - C:\Python27\Scripts\pip.exe install mercurial
  # Install tox (will cover all python versions)
  - C:\Python36\python -m pip install -U tox

  # prepare git
  - 'git config --global user.email "bumpversion-test-git@appveyor.ci"'
  - 'git config --global user.name "Testing Git on AppVeyor CI"'
  - 'git --version'
  - 'git config --list'

  # prepare mercurial
  - ps: Add-Content $ENV:UserProfile\Mercurial.ini "[ui]`r`nusername = Testing Mercurial on AppVeyor CI <bumpversion-test-hg@appveyor.ci>"
  - ps: Write-Host $ENV:UserProfile\Mercurial.ini
  - ps: Get-Content $ENV:UserProfile\Mercurial.ini
  - 'hg --version'

test_script:
  - C:\Python36\scripts\tox

cache:
  - '%LOCALAPPDATA%\pip\cache'
  - '%USERPROFILE%\.cache\pre-commit'
